{
  "name": "Custom Notification Badge",
  "tagline": "#display notification count on Actionbar",
  "body": "### Custom Notification Badge\r\n\r\nFor Creating badge:\r\n\r\n**BadgeDrawable.java**\r\n\r\n    `package com.example.priyankam.customnotificationbadge;\r\n\r\n     import android.content.Context;\r\n     import android.graphics.Canvas;\r\n     import android.graphics.Color;\r\n     import android.graphics.ColorFilter;\r\n     import android.graphics.Paint;\r\n     import android.graphics.Rect;\r\n     import android.graphics.Typeface;\r\n     import android.graphics.drawable.Drawable;\r\n\r\n    public class BadgeDrawable extends Drawable {\r\n\r\n    private float mTextSize;\r\n    private Paint mBadgePaint;\r\n    private Paint mTextPaint;\r\n    private Rect mTxtRect = new Rect();\r\n\r\n    private String mCount = \"\";\r\n    private boolean mWillDraw = false;\r\n\r\n    public BadgeDrawable(Context context) {\r\n        // mTextSize = 10dp;\r\n        mTextSize = context.getResources().getDimension(R.dimen.margin_ssmall);\r\n\r\n        mBadgePaint = new Paint();\r\n        mBadgePaint.setColor(Color.RED);\r\n        mBadgePaint.setAntiAlias(true);\r\n        mBadgePaint.setStyle(Paint.Style.FILL);\r\n\r\n        mTextPaint = new Paint();\r\n        mTextPaint.setColor(Color.WHITE);\r\n        mTextPaint.setTypeface(Typeface.DEFAULT_BOLD);\r\n        mTextPaint.setTextSize(mTextSize);\r\n        mTextPaint.setAntiAlias(true);\r\n        mTextPaint.setTextAlign(Paint.Align.CENTER);\r\n    }\r\n\r\n    @Override\r\n    public void draw(Canvas canvas) {\r\n        if (!mWillDraw) {\r\n            return;\r\n        }\r\n\r\n        Rect bounds = getBounds();\r\n        float width = bounds.right - bounds.left;\r\n        float height = bounds.bottom - bounds.top;\r\n\r\n        // Position the badge in the top-right quadrant of the icon.\r\n        float radius = ((Math.min(width, height) / 2) - 1) / (float) 1.6;\r\n        float centerX = width - radius - 1;\r\n        float centerY = radius + 1;\r\n\r\n        // Draw badge circle.\r\n        canvas.drawCircle(centerX, centerY, radius, mBadgePaint);\r\n\r\n        // Draw badge count text inside the circle.\r\n        mTextPaint.getTextBounds(mCount, 0, mCount.length(), mTxtRect);\r\n        float textHeight = mTxtRect.bottom - mTxtRect.top;\r\n        float textY = centerY + (textHeight / 2f);\r\n        canvas.drawText(mCount, centerX, textY, mTextPaint);\r\n    }\r\n\r\n    /*\r\n    Sets the count (i.e notifications) to display.\r\n     */\r\n    public void setCount(int count) {\r\n        mCount = Integer.toString(count);\r\n\r\n        // Only draw a badge if there are notifications.\r\n        mWillDraw = count > 0;\r\n        invalidateSelf();\r\n    }\r\n\r\n    @Override\r\n    public void setAlpha(int alpha) {\r\n        // do nothing\r\n    }\r\n\r\n    @Override\r\n    public int getOpacity() {\r\n        // TODO Auto-generated method stub\r\n        return 0;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void setColorFilter(ColorFilter cf) {\r\n        // TODO Auto-generated method stub\r\n\r\n    }\r\n    }`\r\n\r\n **menu.xml**\r\n    \r\n    `<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n     <menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n      xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n      <item\r\n        android:id=\"@+id/action_cart\"\r\n        android:icon=\"@drawable/ic_menu_notifications\"\r\n        android:title=\"notification\"\r\n        app:showAsAction=\"always\" />\r\n    </menu>`\r\n\r\n** In MainActivity.java added following code **\r\n\r\n    `@Override\r\n     public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main, menu);\r\n        return super.onCreateOptionsMenu(menu);\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        // Handle action bar item clicks here. The action bar will\r\n        // automatically handle clicks on the Home/Up button, so long\r\n        // as you specify a parent activity in AndroidManifest.xml.\r\n        int id = item.getItemId();\r\n\r\n        // Handle presses on the action bar items\r\n        switch (id) {\r\n            case R.id.action_cart:\r\n\r\n                GlobalClass.setAddToCart(context, item,numMessages);\r\n                invalidateOptionsMenu();\r\n\r\n                //This is the proper solution for Open Some Activity  after clicking the action in notification\r\n                // Open InfoActivity Class on \"Info\" Button Click\r\n                Intent intentInfo = new Intent(this, InfoActivity.class);\r\n                // Send data to InfoActivity Class\r\n                intentInfo.putExtra(\"title\", strTitle);\r\n                intentInfo.putExtra(\"text\", strText);\r\n                startActivity(intentInfo);\r\n\r\n                numMessages=0;//clear notification count\r\n                invalidateOptionsMenu();\r\n\r\n                return true;\r\n\r\n            default:\r\n                onBackPressed();\r\n                return true;\r\n        }\r\n\r\n    }`\r\n\r\n\r\nAnd also add the following code ,where you want to update the notification count:\r\n\r\n    `bcustomnotify.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                GlobalClass.setNotifyCount(numMessages);\r\n                // force the ActionBar to relayout its MenuItems.\r\n                // onCreateOptionsMenu(Menu) will be called again.\r\n                invalidateOptionsMenu();\r\n\r\n            }\r\n        });`\r\n\r\nand also refresh the count onResume():\r\n\r\n    `@Override\r\n     protected void onResume() {\r\n        super.onResume();\r\n        // force the ActionBar to relayout its MenuItems.\r\n        // onCreateOptionsMenu(Menu) will be called again.\r\n        invalidateOptionsMenu();\r\n    }`\r\n\r\n**GlobalClass.java**\r\n    \r\n    `package com.example.priyankam.customnotificationbadge;\r\n\r\n     import android.app.Activity;\r\n     import android.content.Context;\r\n     import android.graphics.drawable.LayerDrawable;\r\n     import android.view.MenuItem;\r\n\r\n     public class GlobalClass extends Activity {\r\n      private static LayerDrawable icon;\r\n      public GlobalClass() {\r\n        //constructor\r\n     }\r\n     public static void setAddToCart(Context context, MenuItem item, int numMessages) {\r\n        icon = (LayerDrawable) item.getIcon();\r\n        SetNotificationCount.setBadgeCount(context, icon,GlobalClass.setNotifyCount(numMessages));\r\n     }\r\n     public static int setNotifyCount(int numMessages) {\r\n        int count=numMessages;\r\n        return count;\r\n    }\r\n    }`\r\n**SetNotificationCount.java**\r\n\r\n    `package com.example.priyankam.customnotificationbadge;\r\n\r\n     import android.content.Context;\r\n     import android.graphics.drawable.Drawable;\r\n     import android.graphics.drawable.LayerDrawable;\r\n\r\n     public class SetNotificationCount {\r\n     public static void setBadgeCount(Context context, LayerDrawable icon, int count) {\r\n        BadgeDrawable badge;\r\n        // Reuse drawable if possible\r\n        Drawable reuse = icon.findDrawableByLayerId(R.id.ic_badge);\r\n        if (reuse != null && reuse instanceof BadgeDrawable) {\r\n            badge = (BadgeDrawable) reuse;\r\n        } else {\r\n            badge = new BadgeDrawable(context);\r\n        }\r\n        badge.setCount(count);\r\n        icon.mutate();\r\n        icon.setDrawableByLayerId(R.id.ic_badge, badge);\r\n    }\r\n    }`\r\n\r\n# Output:\r\n![First Screen](https://raw.githubusercontent.com/Priyanka-Mohanty/CustomNotificationBadge/gh-pages/Images/Screenshot_20160803-151305.png)\r\n![Second Screen](https://raw.githubusercontent.com/Priyanka-Mohanty/CustomNotificationBadge/gh-pages/Images/Screenshot_20160803-151309.png)\r\n![Third Screen](https://raw.githubusercontent.com/Priyanka-Mohanty/CustomNotificationBadge/gh-pages/Images/Screenshot_20160803-151313.png)\r\n![Fourth Screen](https://raw.githubusercontent.com/Priyanka-Mohanty/CustomNotificationBadge/gh-pages/Images/Screenshot_20160803-151335.png)\r\n![Fifth Screen](https://raw.githubusercontent.com/Priyanka-Mohanty/CustomNotificationBadge/gh-pages/Images/Screenshot_20160803-151403.png)",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}